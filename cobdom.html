<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safe Sex Challenge: ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏û‡∏¥‡∏ä‡∏¥‡∏ï 8/10</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --condom-color: #00A8FF;
            --pill-color: #FF4757;
            --bg-color: #2F3542;
            --success: #2ed573;
            --fail: #ff4757;
        }

        body {
            font-family: 'Kanit', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at 50% 50%, #4b4b4b 0%, #2F3542 100%);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            overflow-x: hidden;
            user-select: none;
        }

        h1 {
            text-align: center;
            font-size: 2rem;
            margin: 10px 0;
            text-shadow: 2px 2px 0px #000;
            line-height: 1.2;
        }

        .scoreboard {
            background: rgba(0,0,0,0.5);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1.2rem;
            margin-bottom: 20px;
            border: 2px solid #fff;
            display: flex;
            gap: 20px;
        }

        .score-item span {
            font-weight: bold;
            font-size: 1.5rem;
            color: #FFD700;
        }

        /* --- WHEEL STYLES --- */
        .game-container {
            position: relative;
            width: 320px;
            height: 320px;
            margin-bottom: 20px;
        }

        .wheel-border {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid #fff;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            overflow: hidden;
            z-index: 1;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            transition: transform 3s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            background: conic-gradient(
                var(--condom-color) 0deg 36deg,
                var(--pill-color) 36deg 72deg,
                var(--condom-color) 72deg 108deg,
                var(--pill-color) 108deg 144deg,
                var(--condom-color) 144deg 180deg,
                var(--pill-color) 180deg 216deg,
                var(--condom-color) 216deg 252deg,
                var(--pill-color) 252deg 288deg,
                var(--condom-color) 288deg 324deg,
                var(--pill-color) 324deg 360deg
            );
        }

        .line {
            position: absolute;
            top: 0; left: 50%;
            width: 2px; height: 50%;
            background: rgba(255,255,255,0.8);
            transform-origin: bottom center;
            z-index: 2;
        }

        .number {
            position: absolute;
            top: 15px; left: 50%;
            transform: translateX(-50%);
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px black;
        }

        /* ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å‡∏ú‡∏¥‡∏î‡∏ö‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠ */
        .status-mark {
            position: absolute;
            top: 40px; left: 50%;
            transform: translateX(-50%);
            font-size: 1.5rem;
            z-index: 3;
            display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô */
        }

        .pointer {
            position: absolute;
            top: -20px; left: 50%;
            transform: translateX(-50%);
            width: 0; height: 0; 
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 35px solid #FFD700;
            z-index: 10;
            filter: drop-shadow(0 4px 2px rgba(0,0,0,0.5));
        }

        .center-circle {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 50px; height: 50px;
            background: white;
            border-radius: 50%;
            z-index: 5;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }

        /* --- CONTROLS --- */
        .spin-btn {
            background: linear-gradient(to bottom, #FFD700, #FFA500);
            color: #333;
            border: none;
            padding: 15px 40px;
            font-size: 1.3rem;
            font-family: 'Kanit', sans-serif;
            font-weight: 900;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 0 #b36b00, 0 10px 20px rgba(0,0,0,0.4);
            transition: all 0.1s;
        }

        .spin-btn:active {
            transform: translateY(5px);
            box-shadow: 0 0 0 #b36b00;
        }

        .spin-btn:disabled {
            background: #7f8c8d;
            box-shadow: none;
            cursor: not-allowed;
            color: #bdc3c7;
        }

        /* --- MODAL --- */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 100;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }

        .modal-content {
            background: white;
            color: #333;
            padding: 20px;
            border-radius: 15px;
            max-width: 450px;
            width: 100%;
            text-align: center;
            position: relative;
            animation: popIn 0.3s forwards;
            border-top: 10px solid var(--condom-color);
        }

        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* Timer Bar */
        .timer-container {
            width: 100%;
            height: 10px;
            background: #ddd;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .timer-bar {
            height: 100%;
            width: 100%;
            background: #2ed573;
            transition: width 1s linear, background-color 0.3s;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .options-grid {
            display: grid;
            gap: 10px;
        }

        .option-btn {
            background: #f1f2f6;
            border: 2px solid #dfe4ea;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Kanit', sans-serif;
            font-size: 1rem;
            transition: all 0.2s;
            text-align: left;
        }

        .option-btn:hover:not(:disabled) {
            background: #e3f2fd;
            border-color: #70a1ff;
        }

        .option-btn.correct { background: #2ed573; color: white; border-color: #218c53; }
        .option-btn.wrong { background: #ff4757; color: white; border-color: #c0392b; }

        .feedback-text {
            margin-top: 15px;
            font-weight: bold;
            font-size: 1rem;
            min-height: 20px;
        }

        .next-btn {
            margin-top: 15px;
            padding: 10px 30px;
            background: #333;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            display: none;
        }

        /* Result Modal */
        .result-modal-content {
            background: #fff;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            color: #333;
        }

        .result-score {
            font-size: 4rem;
            font-weight: 900;
            margin: 10px 0;
        }

        .result-status {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .pass { color: var(--success); }
        .fail { color: var(--fail); }

    </style>
</head>
<body>

    <h1>üöÄ Safe Sex Challenge</h1>
    
    <div class="scoreboard">
        <div class="score-item">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà: <span id="qCount">0</span>/10</div>
        <div class="score-item">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="scoreDisplay">0</span></div>
    </div>

    <div class="game-container">
        <div class="pointer"></div>
        <div class="wheel-border">
            <div class="wheel" id="wheel">
                <!-- Segments will be generated by JS -->
            </div>
        </div>
        <div class="center-circle" id="centerText">VS</div>
    </div>

    <button class="spin-btn" id="spinBtn" onclick="spinWheel()">‡∏´‡∏°‡∏∏‡∏ô‡∏•‡∏∏‡πâ‡∏ô‡πÇ‡∏ä‡∏Ñ!</button>

    <!-- Modal Quiz -->
    <div class="modal-overlay" id="quizModal">
        <div class="modal-content" id="modalContent">
            <h3 id="timerText">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤: 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</h3>
            <div class="timer-container">
                <div class="timer-bar" id="timerBar"></div>
            </div>
            
            <div id="questionText" class="question-text">Question Here</div>
            <div class="options-grid" id="optionsContainer"></div>
            <div id="feedback" class="feedback-text"></div>
            <button class="next-btn" id="nextBtn" onclick="closeModal()">‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ >></button>
        </div>
    </div>

    <!-- Modal Result -->
    <div class="modal-overlay" id="resultModal">
        <div class="result-modal-content">
            <h2>‡∏à‡∏ö‡πÄ‡∏Å‡∏°!</h2>
            <div>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠</div>
            <div class="result-score" id="finalScore">0</div>
            <div id="resultStatus" class="result-status"></div>
            <div id="resultMessage"></div>
            <button class="spin-btn" onclick="location.reload()" style="margin-top:20px; font-size:1rem;">‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        </div>
    </div>

    <script>
        // --- DATA: 10 ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ---
        const questions = [
            { id: 1, type: 'condom', q: "1. ‡∏Å‡πà‡∏≠‡∏ô‡∏â‡∏µ‡∏Å‡∏ã‡∏≠‡∏á‡∏ñ‡∏∏‡∏á‡∏¢‡∏≤‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÅ‡∏£‡∏Å?", options: ["‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏´‡∏°", "‡∏î‡∏π‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏ã‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏£‡∏±‡πà‡∏ß", "‡∏î‡∏°‡∏Å‡∏•‡∏¥‡πà‡∏ô", "‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏™‡πà‡∏≠‡∏á"], correct: 1, explain: "‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏π‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡∏∞‡∏ö‡∏µ‡∏ö‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏ã‡∏≠‡∏á‡∏¢‡∏±‡∏á‡∏õ‡πà‡∏≠‡∏á (‡πÑ‡∏°‡πà‡∏£‡∏±‡πà‡∏ß) ‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢" },
            { id: 2, type: 'condom', q: "2. ‡∏ó‡∏≥‡πÑ‡∏°‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ '‡∏ü‡∏±‡∏ô' ‡∏â‡∏µ‡∏Å‡∏ã‡∏≠‡∏á‡∏ñ‡∏∏‡∏á‡∏¢‡∏≤‡∏á?", options: ["‡∏ü‡∏±‡∏ô‡∏à‡∏∞‡∏´‡∏±‡∏Å", "‡πÄ‡∏™‡∏µ‡∏¢‡∏†‡∏≤‡∏û‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå", "‡∏ü‡∏±‡∏ô‡∏≠‡∏≤‡∏à‡πÑ‡∏õ‡πÇ‡∏î‡∏ô‡∏ñ‡∏∏‡∏á‡∏¢‡∏≤‡∏á‡∏Ç‡∏≤‡∏î", "‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡πÑ‡∏°‡πà‡∏≠‡∏£‡πà‡∏≠‡∏¢"], correct: 2, explain: "‡∏Ç‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡∏°‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏ô‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ñ‡∏∏‡∏á‡∏¢‡∏≤‡∏á‡∏â‡∏µ‡∏Å‡∏Ç‡∏≤‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡πÑ‡∏î‡πâ" },
            { id: 3, type: 'condom', q: "3. ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏ö‡∏µ‡∏ö '‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡∏≤‡∏∞' ‡∏õ‡∏•‡∏≤‡∏¢‡∏ñ‡∏∏‡∏á‡∏¢‡∏≤‡∏á‡∏Ç‡∏ì‡∏∞‡πÉ‡∏™‡πà?", options: ["‡πÑ‡∏•‡πà‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏≠‡∏≠‡∏Å ‡∏Å‡∏±‡∏ô‡∏ñ‡∏∏‡∏á‡πÅ‡∏ï‡∏Å", "‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°", "‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô", "‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô"], correct: 0, explain: "‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà ‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ñ‡∏∏‡∏á‡∏¢‡∏≤‡∏á‡πÅ‡∏ï‡∏Å‡∏Ç‡∏ì‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ" },
            { id: 4, type: 'pill', q: "4. ‡∏¢‡∏≤‡∏Ñ‡∏∏‡∏°‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏î‡πâ‡∏ö‡πâ‡∏≤‡∏á?", options: ["‡∏ó‡πâ‡∏≠‡∏á + ‡πÇ‡∏£‡∏Ñ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠", "‡∏ó‡πâ‡∏≠‡∏á ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß", "‡∏ó‡πâ‡∏≠‡∏á + ‡∏™‡∏¥‡∏ß", "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏π‡∏Å"], correct: 1, explain: "‡∏¢‡∏≤‡∏Ñ‡∏∏‡∏°‡∏Å‡∏±‡∏ô‡∏ó‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ (HIV/‡∏ã‡∏¥‡∏ü‡∏¥‡∏•‡∏¥‡∏™) ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏ñ‡∏∏‡∏á‡∏¢‡∏≤‡∏á!" },
            { id: 5, type: 'condom', q: "5. ‡∏™‡∏≤‡∏£‡∏´‡∏•‡πà‡∏≠‡∏•‡∏∑‡πà‡∏ô‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô '‡∏´‡πâ‡∏≤‡∏°' ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏ñ‡∏∏‡∏á‡∏¢‡∏≤‡∏á?", options: ["‡πÄ‡∏à‡∏•‡∏™‡∏π‡∏ï‡∏£‡∏ô‡πâ‡∏≥", "‡∏ô‡πâ‡∏≥‡∏•‡∏≤‡∏¢", "‡πÄ‡∏ö‡∏ö‡∏µ‡πâ‡∏≠‡∏≠‡∏¢‡∏•‡πå / ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô", "‡πÄ‡∏à‡∏•‡∏ã‡∏¥‡∏•‡∏¥‡πÇ‡∏Ñ‡∏ô"], correct: 2, explain: "‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏¢‡∏≤‡∏á‡∏û‡∏≤‡∏£‡∏≤ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ñ‡∏∏‡∏á‡∏¢‡∏≤‡∏á‡πÄ‡∏õ‡∏∑‡πà‡∏≠‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏ï‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ" },
            { id: 6, type: 'condom', q: "6. ‡πÉ‡∏™‡πà‡∏ñ‡∏∏‡∏á‡∏¢‡∏≤‡∏á 2 ‡∏ä‡∏±‡πâ‡∏ô ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏´‡∏°?", options: ["‡∏à‡∏£‡∏¥‡∏á ‡∏´‡∏ô‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏î‡∏µ", "‡πÑ‡∏°‡πà‡∏à‡∏£‡∏¥‡∏á! ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏î‡∏™‡∏µ‡∏à‡∏ô‡∏Ç‡∏≤‡∏î", "‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏ô‡∏•‡∏∞‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠", "‡πÑ‡∏°‡πà‡∏à‡∏£‡∏¥‡∏á ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á"], correct: 1, explain: "‡∏Å‡∏≤‡∏£‡πÉ‡∏™‡πà‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏£‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏î‡∏™‡∏µ‡∏à‡∏ô‡∏ñ‡∏∏‡∏á‡∏¢‡∏≤‡∏á‡∏Ç‡∏≤‡∏î‡∏á‡πà‡∏≤‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏±‡πâ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß" },
            { id: 7, type: 'pill', q: "7. ‡∏•‡∏∑‡∏°‡∏Å‡∏¥‡∏ô‡∏¢‡∏≤‡∏Ñ‡∏∏‡∏° 1 ‡∏ß‡∏±‡∏ô ‡∏ó‡∏≥‡πÑ‡∏á‡∏î‡∏µ?", options: ["‡∏£‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤", "‡∏Å‡∏¥‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡∏ô‡∏∂‡∏Å‡πÑ‡∏î‡πâ (‡πÅ‡∏°‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏¥‡∏ô 2 ‡πÄ‡∏°‡πá‡∏î)", "‡πÄ‡∏ö‡∏¥‡πâ‡∏• 3 ‡πÄ‡∏°‡πá‡∏î", "‡∏Å‡∏¥‡∏ô‡∏¢‡∏≤‡πÅ‡∏Å‡πâ‡∏õ‡∏ß‡∏î‡πÅ‡∏ó‡∏ô"], correct: 1, explain: "‡∏£‡∏µ‡∏ö‡∏Å‡∏¥‡∏ô‡πÄ‡∏°‡πá‡∏î‡∏ó‡∏µ‡πà‡∏•‡∏∑‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏¥‡∏ô‡πÄ‡∏°‡πá‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥" },
            { id: 8, type: 'condom', q: "8. ‡∏Ñ‡∏ß‡∏£‡∏ñ‡∏≠‡∏î‡∏ñ‡∏∏‡∏á‡∏¢‡∏≤‡∏á‡∏≠‡∏≠‡∏Å‡∏ï‡∏≠‡∏ô‡πÑ‡∏´‡∏ô?", options: ["‡∏ï‡∏≠‡∏ô‡πÑ‡∏´‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ", "‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡πà‡∏≠‡∏ô", "‡∏ñ‡∏≠‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡∏¥‡∏à (‡∏Ç‡∏ì‡∏∞‡πÅ‡∏Ç‡πá‡∏á‡∏ï‡∏±‡∏ß)", "‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡∏¥‡∏à"], correct: 2, explain: "‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏≠‡∏î‡∏ï‡∏≠‡∏ô‡∏¢‡∏±‡∏á‡πÅ‡∏Ç‡πá‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏ö‡∏Ç‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏´‡∏•‡∏∏‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏Å" },
            { id: 9, type: 'condom', q: "9. ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏¥‡πâ‡∏á‡∏ñ‡∏∏‡∏á‡∏¢‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á?", options: ["‡∏ó‡∏¥‡πâ‡∏á‡∏ä‡∏±‡∏Å‡πÇ‡∏Ñ‡∏£‡∏Å", "‡∏´‡πà‡∏≠‡∏ó‡∏¥‡∏ä‡∏ä‡∏π‡πà‡∏ó‡∏¥‡πâ‡∏á‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞", "‡πÇ‡∏¢‡∏ô‡∏≠‡∏≠‡∏Å‡∏ô‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á", "‡∏ß‡∏≤‡∏á‡∏ó‡∏¥‡πâ‡∏á‡πÑ‡∏ß‡πâ"], correct: 1, explain: "‡∏´‡πâ‡∏≤‡∏°‡∏ó‡∏¥‡πâ‡∏á‡∏ä‡∏±‡∏Å‡πÇ‡∏Ñ‡∏£‡∏Å‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î! ‡∏ï‡πâ‡∏≠‡∏á‡∏´‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏¥‡∏î‡∏ä‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏¥‡πâ‡∏á‡∏Ç‡∏¢‡∏∞" },
            { id: 10, type: 'pill', q: "10. ‡∏¢‡∏≤‡∏Ñ‡∏∏‡∏°‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô ‡∏Å‡∏¥‡∏ô‡∏ö‡πà‡∏≠‡∏¢‡πÜ ‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°?", options: ["‡πÑ‡∏î‡πâ ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô", "‡πÑ‡∏î‡πâ ‡∏ñ‡πâ‡∏≤‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á", "‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô", "‡πÑ‡∏î‡πâ ‡∏ä‡πà‡∏ß‡∏¢‡∏ú‡∏¥‡∏ß‡∏™‡∏ß‡∏¢"], correct: 2, explain: "‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÜ (‡πÄ‡∏ä‡πà‡∏ô ‡∏ñ‡∏∏‡∏á‡πÅ‡∏ï‡∏Å) ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏ú‡∏•‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á" }
        ];

        // --- GAME STATE ---
        let score = 0;
        let answeredCount = 0;
        let answeredQuestions = new Array(10).fill(false); // ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡πÑ‡∏´‡∏ô‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß
        let timerInterval;
        let timeLeft = 30;
        const totalTime = 30;

        // --- SETUP WHEEL ---
        const wheel = document.getElementById('wheel');
        const segmentAngle = 360 / 10;

        for(let i=0; i<10; i++) {
            const angle = i * segmentAngle;
            // ‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏ö‡πà‡∏á
            const line = document.createElement('div');
            line.className = 'line';
            line.style.transform = `rotate(${angle}deg)`;
            wheel.appendChild(line);

            // Container ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢
            const numContainer = document.createElement('div');
            numContainer.style.position = 'absolute';
            numContainer.style.top = '0';
            numContainer.style.left = '50%';
            numContainer.style.width = '100%';
            numContainer.style.height = '100%';
            numContainer.style.transform = `rotate(${angle + (segmentAngle/2)}deg)`;
            
            // ‡πÄ‡∏•‡∏Ç‡∏Ç‡πâ‡∏≠
            const numText = document.createElement('div');
            numText.innerText = i + 1;
            numText.className = 'number';
            numContainer.appendChild(numText);

            // ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å/‡∏ú‡∏¥‡∏î (‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà)
            const mark = document.createElement('div');
            mark.className = 'status-mark';
            mark.id = `mark-${i}`;
            numContainer.appendChild(mark);
            
            wheel.appendChild(numContainer);
        }

        // --- GAME LOGIC ---
        let currentRotation = 0;
        const spinBtn = document.getElementById('spinBtn');

        function spinWheel() {
            if (answeredCount >= 10) return; // ‡∏à‡∏ö‡πÄ‡∏Å‡∏°‡πÅ‡∏•‡πâ‡∏ß

            spinBtn.disabled = true;
            spinBtn.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏´‡∏°‡∏∏‡∏ô...";

            // ‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏≠‡∏ö
            let availableIndices = [];
            questions.forEach((q, index) => {
                if (!answeredQuestions[index]) availableIndices.push(index);
            });

            if (availableIndices.length === 0) {
                endGame();
                return;
            }

            // ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
            const randomIndex = Math.floor(Math.random() * availableIndices.length);
            const targetIndex = availableIndices[randomIndex];

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏á‡∏®‡∏≤‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Ç‡πâ‡∏≠‡∏ô‡∏±‡πâ‡∏ô
            const targetAngleInSegment = (targetIndex * segmentAngle) + (segmentAngle / 2);
            const adjustRotation = 360 - targetAngleInSegment;
            const extraSpins = 360 * 4; // ‡∏´‡∏°‡∏∏‡∏ô 4 ‡∏£‡∏≠‡∏ö
            const totalDegree = currentRotation + extraSpins + adjustRotation;

            wheel.style.transform = `rotate(${totalDegree}deg)`;

            setTimeout(() => {
                currentRotation = totalDegree % 360;
                showQuestion(targetIndex);
            }, 3000);
        }

        function showQuestion(index) {
            const data = questions[index];
            const modal = document.getElementById('quizModal');
            const modalContent = document.getElementById('modalContent');
            
            // Set Color Theme based on type
            if (data.type === 'condom') {
                modalContent.style.borderTopColor = '#00A8FF';
            } else {
                modalContent.style.borderTopColor = '#FF4757';
            }

            document.getElementById('questionText').innerText = data.q;
            document.getElementById('feedback').innerText = "";
            document.getElementById('nextBtn').style.display = "none";
            
            const optionsDiv = document.getElementById('optionsContainer');
            optionsDiv.innerHTML = "";

            data.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "option-btn";
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(btn, i, data.correct, data.explain, index);
                optionsDiv.appendChild(btn);
            });

            modal.style.display = "flex";
            
            // Start Timer
            startTimer(index);
        }

        function startTimer(questionIndex) {
            timeLeft = 30;
            updateTimerUI();
            
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerUI();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    handleTimeout(questionIndex);
                }
            }, 1000);
        }

        function updateTimerUI() {
            document.getElementById('timerText').innerText = `‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤: ${timeLeft} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
            const percentage = (timeLeft / totalTime) * 100;
            const bar = document.getElementById('timerBar');
            bar.style.width = percentage + "%";
            
            if (percentage < 30) {
                bar.style.backgroundColor = "#ff4757"; // ‡πÅ‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡πâ‡∏≠‡∏¢
            } else if (percentage < 60) {
                bar.style.backgroundColor = "#ffa502"; // ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á
            } else {
                bar.style.backgroundColor = "#2ed573"; // ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
            }
        }

        function handleTimeout(questionIndex) {
            // ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ = ‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î
            const options = document.querySelectorAll('.option-btn');
            options.forEach(btn => btn.disabled = true);
            
            const feedback = document.getElementById('feedback');
            feedback.style.color = "#ff4757";
            feedback.innerText = "‚è∞ ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤! ‡πÄ‡∏â‡∏•‡∏¢: " + questions[questionIndex].explain;
            
            document.getElementById('nextBtn').style.display = "inline-block";
            
            updateGameState(questionIndex, false);
        }

        function checkAnswer(btn, selectedIndex, correctIndex, explanation, questionIndex) {
            clearInterval(timerInterval); // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏ß‡∏•‡∏≤

            const allBtns = document.querySelectorAll('.option-btn');
            allBtns.forEach(b => b.disabled = true);

            const feedback = document.getElementById('feedback');
            let isCorrect = false;

            if (selectedIndex === correctIndex) {
                btn.classList.add('correct');
                feedback.style.color = "#2ed573";
                feedback.innerText = "üéâ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! " + explanation;
                isCorrect = true;
                score++;
                document.getElementById('scoreDisplay').innerText = score;
            } else {
                btn.classList.add('wrong');
                allBtns[correctIndex].classList.add('correct');
                feedback.style.color = "#ff4757";
                feedback.innerText = "‚ùå ‡∏ú‡∏¥‡∏î! " + explanation;
            }

            document.getElementById('nextBtn').style.display = "inline-block";
            updateGameState(questionIndex, isCorrect);
        }

        function updateGameState(index, isCorrect) {
            answeredQuestions[index] = true;
            answeredCount++;
            document.getElementById('qCount').innerText = answeredCount;

            // Mark on Wheel
            const mark = document.getElementById(`mark-${index}`);
            mark.style.display = 'block';
            if (isCorrect) {
                mark.innerText = "‚úÖ";
            } else {
                mark.innerText = "‚ùå";
            }
        }

        function closeModal() {
            document.getElementById('quizModal').style.display = "none";
            
            if (answeredCount >= 10) {
                endGame();
            } else {
                spinBtn.disabled = false;
                spinBtn.innerText = "‡∏´‡∏°‡∏∏‡∏ô‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ!";
            }
        }

        function endGame() {
            const resultModal = document.getElementById('resultModal');
            const scoreText = document.getElementById('finalScore');
            const statusText = document.getElementById('resultStatus');
            const messageText = document.getElementById('resultMessage');

            scoreText.innerText = score + "/10";
            
            if (score >= 8) {
                statusText.innerText = "üèÜ MISSION COMPLETE!";
                statusText.className = "result-status pass";
                messageText.innerText = "‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î! ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á Safe Sex ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏ó‡∏û!";
                // Effect ‡∏û‡∏•‡∏∏ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏µ‡πÉ‡∏à
            } else {
                statusText.innerText = "üíÄ MISSION FAILED";
                statusText.className = "result-status fail";
                messageText.innerText = "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏ô‡∏∞ (‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ 8 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ) ‡∏•‡∏≠‡∏á‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏≤‡πÅ‡∏Å‡πâ‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏°‡πà!";
            }

            resultModal.style.display = "flex";
        }
    </script>
</body>
</html>
